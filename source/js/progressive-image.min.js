window.addEventListener&&window.requestAnimationFrame&&document.getElementsByClassName&&window.addEventListener("load",function(){var pItem=document.getElementsByClassName("progressive replace"),timer;function scroller(e){timer=timer||setTimeout(function(){timer=null,requestAnimationFrame(inView)},300)}function inView(){for(var wT=window.pageYOffset,wB=wT+window.innerHeight,cRect,pT,pB,p=0;p<pItem.length;)wT<(pB=(pT=wT+(cRect=pItem[p].getBoundingClientRect()).top)+cRect.height)&&wB>pT?(loadFullImage(pItem[p]),pItem[p].classList.remove("replace")):p++}function loadFullImage(item){if(item&&item.href){var img=new Image;item.dataset&&(img.srcset=item.dataset.srcset||"",img.sizes=item.dataset.sizes||""),img.src=item.href,img.className="reveal",img.complete?addImg():img.onload=addImg}function addImg(){item.addEventListener("click",function(e){e.preventDefault()},!1),item.appendChild(img).addEventListener("animationend",function(e){var pImg=item.querySelector&&item.querySelector("img.preview");null!=pImg&&(e.target.alt=pImg.alt||"",item.removeChild(pImg),e.target.classList.remove("reveal"))})}}window.addEventListener("scroll",scroller,!1),window.addEventListener("resize",scroller,!1),inView()},!1);