// TODO fix the position and the placeholder of the avatar image 
// TODO change the nav and sns structure. It cant be a li and ul object.

$line-height: 1.5
$ratio: 1.25
$sidebar-width: 22em

$ratio_padding: 1.25

$content-padding-xxs: .75em 
$content-padding-xs: 1em 
$content-padding-s: 1.5em 
$content-padding-m: 2em
$content-padding-l: 2.5em

$break-xs: 360px
$break-s: 480px
$break-m: 768px
$break-l: 920px
$break-xl: 1200px
$break-xxl: 1600px

$base-font-size-xxs: 75%
$base-font-size-xs: 80%
$base-font-size-s: 85%
$base-font-size: 90%
$base-font-size-m: 100%

$step-up-1: 1em * $ratio
$step-up-2: $step-up-1 * $ratio
$step-up-3: $step-up-2 * $ratio
$step-up-4: $step-up-3 * $ratio
$step-down-1: 1em / $ratio
$step-down-2: $step-down-1 / $ratio

$max-card-width: 800px
$card-border-radius: 3px
$background-color: #EAEAF2
$sidebar-background-color: white
$card-background: rgb(255,255,255)
$dark-mode-card: rgba(44,50,58,1)

$post-width: 28.75em
$post-height: 32.875em
$post-padding: 2em
//colors



@font-face
  font-family: 'Roboto'
  font-style: normal
  font-weight: 600
  src: local("Roboto Medium"), url(/fonts/Roboto-Medium.woff) format("tff")


@font-face
  font-family: 'Roboto'
  font-style: normal
  font-weight: 400
  src: local("Roboto Regular"), url(/fonts/Roboto-Regular.woff) format("tff")


@font-face
  font-family: 'Roboto'
  font-style: normal
  font-weight: 300
  src: local("Roboto Light"), url(/fonts/Roboto-Light.woff) format("tff") 


\::-moz-selection, ::selection
  background: rgba(107, 79, 189, 0.4)
  text-shadow: none

body
  -moz-osx-font-smoothing: grayscale
  -webkit-font-smoothing: antialiased
  background: $background-color
  background-attachment: fixed
  background-size: cover
  //height: 100vh
  margin: 0
  //width: 100%
  //position: fixed
  //position fixed and height somehow break the performance on safari
  text-rendering: optimizeLegibility

html
  -ms-touch-action: manipulation
  font-size: $base-font-size
  line-height: $line-height
  display: block
  height: 100%
  width: 100%
  touch-action: manipulation
  //-webkit-text-size-adjust: 80%
  //-ms-text-size-adjust: 80%
  //text-size-adjust: 80%
  
  @media only screen and (min-width: $break-xl)  
    font-size: $base-font-size-m
  @media only screen and (min-width: $break-s) and (max-width: $break-m) 
    font-size: $base-font-size-s
  @media only screen and (min-width: $break-xs) and (max-width: $break-s) 
    font-size: $base-font-size-xs
  @media only screen and (max-width: $break-xs) 
    font-size: $base-font-size-xxs
    


body, html
  font-family: 'Roboto', "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif
  font-weight: 400
  overflow-x: hidden

code
  border: none
  border-bottom-right-radius: 3px
  border-radius: 0
  border-top-right-radius: 3px
  display: block
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace
  font-size: 13px
  line-height: 19px
  overflow: auto
  padding: 0

a
  color: inherit
  text-decoration: none
  

img
  max-width: 100%

*, :after, :before
  -webkit-box-sizing: border-box
  box-sizing: border-box

h1, h2, h3, h4, h5, h6, ul
  &:first-of-type
    padding-top: 0
    margin-top: 0

h1, h2, h3, h4, h5, h6
  font-weight: 600

h1, h2, h3
  margin: $step-up-1 0 .5em
  line-height: 1.2
  margin-left: -2px

ul
  list-style-type: none
  padding: 0
  margin: 0
li
  font-size: $base-font-size
  text-transform: uppercase
  font-weight: 500

h1
  font-size: $step-up-3

h2
  font-size: $step-up-2

h3
  font-size: $step-up-1

h4
  font-size: $base-font-size

p
  font-weight: 400
  overflow-wrap: break-word
  word-wrap: break-word
  -ms-word-break: break-all
  word-break: break-word
  -ms-hyphens: auto
  -moz-hyphens: auto
  -webkit-hyphens: auto
  hyphens: auto
ul
  letter-spacing: 1px
  line-height: $line-height
  font-weight: 600

#layout
  display: grid
  grid-template-columns: $sidebar-width 1fr
  grid-template-rows: 100px 1fr
  width: 100%    
  @media only screen and (max-width: $break-l)
    grid-template-columns: 1fr
    
#main
  width: 100%
  overflow: visible
  padding-left: 1em
  padding-right: 1em
  z-index: 1
  grid-column-start: 2
  grid-row-start: 2

#topbar
  display: flex
  align-items: center 
  z-index: 1000
  height: 100px
  width: 100%
  //background: linear-gradient(to top, rgba(234,234,242,0) 0%, rgba(234,234,242,1) 100%)
  padding: 0 2em
  h3
    text-transform: uppercase
    color: #293C50
    margin: 0
    padding-left: 3em
  span.slash
    color: #E7AAAE
    padding: 0 .5em
  @media only screen and (min-width: $break-l)
    margin-left: $sidebar-width
    i
      display: none
  @media only screen and (max-width: $break-l)
    position: fixed
    //background: #F4F7FA
    //box-shadow: 0 2px 40px 0 rgba(0,0,0,0.15)
  @media only screen and (max-width: $break-m)
    h3
      justify-self: center

#search
  @media only screen and (max-width: $break-m)
    display: none

input[type="text"]
  background: #FFFFFF
  box-shadow: 0 2px 40px 0 rgba(0,0,0,0.15)
  border-radius: 3px
  border: none
  height: 2em
  margin-left: 1em
  width: 260px

#menu
  position: fixed
  i
    font-size: $step-up-3
    justify-self: flex-start
    transition: color .3s ease-in-out
    color: #293C50
    -webkit-filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.2))
    filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.2))
    &:hover
      color: #6F64F2
  @media only screen and (min-width: $break-l) 
    display: none
    
#close
  padding: 20px 40px
  justify-self: flex-end
  font-size: $base-font-size
  margin-top: auto
  margin-bottom: 1em
  a 
    color: #E7AAAE 
    &:hover
      color: #E8676A !important
  i
    margin-right: 1em
    width: 1em
  @media only screen and (min-width: $break-l)
    display: none 

#header
  vertical-align: middle
  z-index: 1200
  height: 100%
  flex-grow: 1
  display: flex
  flex-direction: column
  flex-flow: nowrap
  overflow-wrap: normal
  overflow-y: hidden
  flex-shrink: 1
  flex-wrap: nowrap
  background-color: $sidebar-background-color
  box-shadow: 0 10px 40px 0 rgba(0,0,0,0.20)
  position: fixed
  align-items: flex-start 
  width: $sidebar-width
  @media only screen and (min-width: $break-l) 
    left: 0
  @media only screen and (max-width: $break-l) 
    left: $sidebar-width - (2 * $sidebar-width)
  p
    margin: 0
  & > div
    &:first-child
      padding-top: 0
    &:last-child 
      border-bottom: none
      padding-bottom: 0
  a
    transition: color .3s ease
    &:hover
      color: black

.show-header
  -webkit-transform: translate3d($sidebar-width,0,0)
  transform: translate3d($sidebar-width,0,0)
  -webkit-transition: all .3s ease
  transition: all .3s ease
  @media only screen and (min-width: $break-l)
    -webkit-transform: translate3d(0,0,0)
    transform: translate3d(0,0,0)


#header
  display: flex
  flex-flow: row wrap
  flex-direction: column

#content
  display: grid
  grid-gap: 3em
  grid-template-columns: repeat(auto-fit, minmax($post-width, 1fr))
  grid-auto-rows: $post-height
  //grid-auto-flow: row dense
  padding: 3em

#info
  padding: 0 .75em

#aboutme
  div
    font-size: $step-up-1
    font-weight: 500
    color: #293C50
  p
    color: #5F7288

#navigation, #sns, #aboutme
  padding: 20px 40px


#info
  width: 100%
  display: flex
  flex-direction: row
  background-color: #F4F7FA
  height: 140px
  align-items: center
  justify-content: center

#title
  padding-left: .75em
  h3
    color: #6F64F2
  p 
    color: #6D757E
  & > *
    margin: 0

#navigation, #sns
  width: 100%
  a
    transition: color .3s ease-in-out
    color: #5F7288
    &:hover
      color: #ABA8F2
      i
        color: #ebebfc
  i 
    width: 1em
    color: #E7EDF3
    transition: color .3s ease-in-out
  i 
    width: 1em
    margin-right: 1em
  li
    line-height: 3

#avatar
  img
    border-radius: 120%
    display: block
    height: auto
    width: 5em
    margin: auto
    box-shadow: 0 10px 40px 0 rgba(0,0,0,0.20)

.card
  box-sizing: border-box
  display: flex
  flex-direction: column
  overflow: hidden
  position: relative
  margin-bottom: 2em
  background: $card-background
  border-radius: $card-border-radius
  box-shadow: 0 10px 40px 0 rgba(0,0,0,0.20)

.post
  width: $post-width 
  height: $post-height
  color: white
  &:hover
    .post_thumbnail
      //display: none
    .post_content
      // -webkit-transform: translate3d(0, -60%, 0)
      // transform: translate3d(0, -60%, 0)
    .hidden
      //max-height: none
      //height: 17em
 

.article
  width: 765px
  margin-top: 24px
  .post_content
    margin-top: 175px  
    padding-left: calc(20px + 2em)
    padding-right: calc(20px + 2em)
    padding-bottom: calc(20px + 2em)
    h2
      color: #6F64F2  
  

.article_banner
  position: absolute
  width: 725px
  height: 187.5px
  border-radius: $card-border-radius
  z-index: 20
  display: flex
  flex-direction: column
  justify-content: center
  box-shadow: 0 2px 40px 0 rgba(0,0,0,0.15)
  padding: $post-padding
  .post_footer
    padding-top: .5em
    border-top: 1px solid rgba(255,255,255,.7)
  .post_tags
    padding-bottom: .5em
  .article_title
    color: white
    position: relative
    display: flex
    align-items: baseline
    flex-direction: row
    justify-content: space-between
    z-index: 20
    h1
      font-size: $step-up-4
      margin-bottom: 0
    .post_date
      font-size: $base-font-size
      margin-bottom: 0
      font-weight: 400

.card-gradient
  z-index: 3
  &::after
    -webkit-transition: opacity .3s ease
    background-image: -webkit-gradient(linear, left bottom, left top, from(rgba(142, 102, 119, 0.15)), color-stop(90%, rgba(255, 175, 189, 0)))
    background-image: linear-gradient(to top, rgba(142, 102, 119, 0.15) 0%, rgba(255, 175, 189, 0) 90%)
    bottom: 0
    content: ''
    height: 40%
    left: 0
    opacity: .4
    position: absolute
    transition: opacity .3s ease
    width: 100%
    z-index: 2
  &:hover::after
    opacity: 1

.post_thumbnail
  width: 100%
  padding-top: $post-padding
  padding-left: $post-padding
  padding-right: $post-padding
  img
    height: auto
    vertical-align: middle
    -webkit-filter: drop-shadow(0 2px 16px rgba(0, 0, 0, 0.2))
    filter: drop-shadow(0 2px 16px rgba(0, 0, 0, 0.2))

.post_title
  position: relative
  display: flex
  align-items: baseline
  flex-direction: row
  justify-content: space-between
  z-index: 20
  h1
    margin-bottom: 0
  .post_date
    font-size: $base-font-size
    margin-bottom: 0
    font-weight: 400

.post_tags
  display: inline-flex
  height: 1.25rem
  overflow: hidden

.post_footer
  z-index: 10

.post_content
  padding: $post-padding

.post_excerpt
  border-top: 1px solid rgba(255,255,255,.3)
  &.hidden
    -webkit-mask-image: -webkit-linear-gradient(top, rgba(255,255,255,1), rgba(255,255,255,.8) 80%, rgba(255,255,255,0))
    max-height: 6em
    overflow-x: hidden

.post_content, .post_title, .post_footer, 
  //animation-duration: .4s
  //animation-fill-mode: both
  //animation-name: fade-in
  //animation-timing-function: ease
  //animation-delay: .2s

.post_content
  position: relative
  z-index: 4
  
.tags-list
  margin: 0
  padding: 0

.tags-list-item
  a
    -webkit-transition: color .3s ease
    transition: color .3s ease
    text-decoration: none
    color: rgba(255,255,255,.7)
    text-transform: uppercase
    &:hover
      color: white
  -webkit-appearance: none
  float: left
  padding-right: .5em
  font-weight: 400
  list-style: none
  margin-left: 0
  padding-left: 0
  text-align: center
  position: relative
  z-index: 4


.button-wrapper
  z-index: -1
  margin-left: auto
  &:last-of-type
    padding-bottom: 0

.fade-in
  animation-duration: .4s
  animation-fill-mode: both
  animation-delay: .1s
  animation-name: fade-in-up
  animation-timing-function: ease
 
@keyframes fade-in-up 
  from 
    opacity: 0
    -webkit-transform: translate3d(0, 1%, 0)
    transform: translate3d(0, 1%, 0)
  to 
    opacity: 1
    -webkit-transform: none
    transform: none

@keyframes fade-in 
  from 
    opacity: 0
    -webkit-transform: translate3d(0, 0, 0)
    transform: translate3d(0, 0, 0)
  to 
    opacity: 1
    -webkit-transform: none
    transform: none
  
.button
  background-color: white 
  border-radius: 40px
  color: #5F7288
  display: inline-block
  font-size: $base-font-size
  font-weight: 400
  padding: .5em 1em
  margin-right: .5em
  margin-top: .5em
  min-width: 6em
  position: relative
  text-align: center
  text-decoration: none
  text-transform: uppercase
  z-index: 4
  box-shadow: 0 2px 8px 3px rgba(255,255,255,0.10)
  &:hover
    box-shadow: 0 2px 8px 3px rgba(255,255,255,0.2)
    color: #293C50
  &.alt
    background: transparent
    border: 2px solid rgba(255,255,255,.7)
    color: rgba(255,255,255,.7)
  &.alt:hover
    border: 2px solid rgba(255,255,255,1)
    color: white
  @media screen and (max-width: $break-m)
    padding: .5em 1em


.container
  display:flex
  flex-direction: column
  margin: auto
  justify-content: flex-start
  .item 
    display: flex
    flex-direction: row
    align-items: center
    i
      font-size: $step-up-2
      width: 2em

