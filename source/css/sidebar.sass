//TODO fix the position and the placeholder of the avatar image 

$line-height: 1.6
$ratio: 1.6
$color: rgba(0, 0, 0 , .75)
$sidebar-width: 21rem 

$ratio_padding: 1.414

$content-padding-xxs: .75em 
$content-padding-xs: 1em 
$content-padding-s: 1.5em 
$content-padding-m: 2em
$content-padding-l: 2.5em

$break-xs: 360px
$break-s: 480px
$break-m: 768px
$break-l: 1200px

$base-font-size-xxs: 75%
$base-font-size-xs: 85%
$base-font-size-s: 90%
$base-font-size: 100%

$step-up-1: 1em * $ratio
$step-up-2: $step-up-1 * $ratio
$step-up-3: $step-up-2 * $ratio
$step-down-1: 1em / $ratio
$step-down-2: $step-down-1 / $ratio

$max-card-width: 800px
$card-border-radius: .75em
$background-color: rgb(255,255,255)
$card-background: rgb(255,255,255)
$dark-mode-card: rgba(44,50,58,1)


@font-face
  font-family: 'Colfax'
  font-style: normal
  font-weight: 600
  src: local("Colfax Medium"), url(/fonts/Colfax-Medium.woff) format("woff")


@font-face
  font-family: 'Colfax'
  font-style: normal
  font-weight: 400
  src: local("Colfax Regular"), url(/fonts/Colfax-Regular.woff) format("woff")


@font-face
  font-family: 'Colfax'
  font-style: normal
  font-weight: 300
  src: local("Colfax Light"), url(/fonts/Colfax-Light.woff) format("woff") 


\::-moz-selection, ::selection
  background: rgba(107, 79, 189, 0.4)
  text-shadow: none

body
  -moz-osx-font-smoothing: grayscale
  -webkit-font-smoothing: antialiased
  background: $background-color
  background-attachment: fixed
  background-size: cover
  //height: 100vh
  margin: 0
  //width: 100%
  //position: fixed
  //position fixed and height somehow break the performance on safari
  text-rendering: optimizeLegibility

html
  -ms-touch-action: manipulation
  color: $color
  font-size: $base-font-size
  line-height: $line-height
  display: block
  height: 100%
  width: 100%
  touch-action: manipulation
  //-webkit-text-size-adjust: 80%
  //-ms-text-size-adjust: 80%
  //text-size-adjust: 80%
  
  @media only screen and (min-width: $break-s) and (max-width: $break-m) 
    font-size: $base-font-size-s
  @media only screen and (min-width: $break-xs) and (max-width: $break-s) 
    font-size: $base-font-size-xs
  @media only screen and (max-width: $break-xs) 
    font-size: $base-font-size-xxs
    


body, html
  font-family: 'Colfax', "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif
  font-weight: 400
  overflow-x: hidden

code
  border: none
  border-bottom-right-radius: 3px
  border-radius: 0
  border-top-right-radius: 3px
  display: block
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace
  font-size: 13px
  line-height: 19px
  overflow: auto
  padding: 0

a
  color: inherit
  text-decoration: none

img
  max-width: 100%

*, :after, :before
  -webkit-box-sizing: border-box
  box-sizing: border-box

h1, h2, h3, h4, h5, h6, ul
  &:first-of-type
    padding-top: 0
    margin-top: 0

h1, h2, h3, h4, h5, h6
  font-weight: 600
  letter-spacing: 1px

h1, h2, h3
  margin: $step-up-1 0 .5em
  line-height: 1.2
  letter-spacing: 1px
  margin-left: -2px

ul
  list-style-type: none
  padding: 0
  margin: 0
li
  font-size: $base-font-size
  text-transform: uppercase

h1
  font-size: $step-up-3

h2
  font-size: $step-up-2

h3
  font-size: $step-up-1

h4
  font-size: $base-font-size

p
  font-weight: 300
  overflow-wrap: break-word
  word-wrap: break-word
  -ms-word-break: break-all
  word-break: break-word
  -ms-hyphens: auto
  -moz-hyphens: auto
  -webkit-hyphens: auto
  hyphens: auto

ul
  letter-spacing: 1px
  line-height: $line-height
  font-weight: 600

#layout
  display: grid
  grid-gap: $content-padding-s
  grid-template-columns: $sidebar-width 1fr
  width: 100%
  margin: auto
  max-width: 1300px
  padding-bottom: 4em !important

  @media only screen and (min-width: $break-l)
    padding: $content-padding-l

  @media only screen and (min-width: $break-s)  and (max-width: $break-m) 
    padding: $content-padding-m
  
  @media only screen and (min-width: $break-s)  and (max-width: $break-s) 
    padding: $content-padding-s

  @media only screen and (min-width: $break-xs) and (max-width: $break-s) 
    padding: $content-padding-xs

  @media only screen and (max-width: $break-xs) 
    padding: $content-padding-xxs

  @media only screen and (max-width: $break-l)
    max-width: $max-card-width
    grid-template-columns: 1fr
    
#main
  width: 100%
  overflow: visible
  z-index: 1

  @media screen and (min-width: $break-l)
    grid-column-start: 2

#header
  padding: 1em
  vertical-align: middle
  z-index: 1
  width: 100%
  p
    margin: 0
  & > div
    border-bottom: 1px solid rgba(0, 0, 0, .1)
    padding: 1.5rem 1rem
    &:first-child
      padding-top: 0
    &:last-child 
      border-bottom: none
  a
    transition: color .3s ease
    &:hover
      color: black
  
  

  @media screen and (max-width: $break-l)
    margin: 0 auto
    align-items: center
    max-width: 30rem
    
  @media screen and (min-width: $break-l)
    position: fixed
    align-items: flex-start 
    width: $sidebar-width
    padding-right: 0
    padding-left: $content-padding-l   // compensate for the fixed position
    padding-top: $content-padding-l   // compensate for the fixed position
  
#content, #header
  display: flex
  flex-flow: row wrap
  flex-direction: column

#info
  width: 100%
  display: flex
  flex-direction: row
  align-items: flex-end

  @media screen and (max-width: $break-l)
    align-items: center
    justify-content: center
    font-size: larger

#title
  width: 100%
  padding-left: 1em
  & > *
    margin: 0
  
  @media screen and (max-width: $break-l)
    width: auto
    max-width: 12em

#navigation
  width: 100%
  a
    transition: color .3s ease-in-out
  i 
    width: 1em

  @media screen and (min-width: $break-l)
    ul
      padding-left: .15rem
    i 
      width: 1em
      margin-right: 1em
    li
      line-height: 2.5

  @media screen and (max-width: $break-l)
    ul
      width: 100%
      display: flex
      justify-content: space-evenly
    i  
      margin-right: .2rem
#sns
  font-size: $step-up-1
  display: flex
  justify-content: space-between
  a
    text-decoration: none
    margin: 0 1rem  
    &:first-child
      margin-left: 0
    &:last-child
      margin-right: 0

#avatar
  img
    border-radius: 120%
    display: block
    height: auto
    width: 5em
    margin: auto

.card
  box-sizing: border-box
  display: flex
  flex-direction: column
  overflow: hidden
  position: relative
  margin-bottom: $content-padding-l * $ratio_padding
  min-height: 15rem
  background: $card-background
  border-radius: $card-border-radius
  -webkit-box-shadow: 0 1.5rem 3rem 1rem rgba(0, 0, 0, 0.1)
  box-shadow: 0 1.5rem 3rem 1rem rgba(0, 0, 0, 0.1)

  @media screen and (min-width: $break-m) and (max-width: $break-l)
    margin-bottom: $content-padding-m * $ratio_padding

  @media screen  and (min-width: $break-s) and (max-width: $break-m)
    margin-bottom: $content-padding-s * $ratio_padding

  @media screen and (max-width: $break-s)
    margin-bottom: $content-padding-xs * $ratio_padding

.card-gradient
  z-index: 3
  &::after
    -webkit-transition: opacity .3s ease
    background-image: -webkit-gradient(linear, left bottom, left top, from(rgba(142, 102, 119, 0.15)), color-stop(90%, rgba(255, 175, 189, 0)))
    background-image: linear-gradient(to top, rgba(142, 102, 119, 0.15) 0%, rgba(255, 175, 189, 0) 90%)
    bottom: 0
    content: ''
    height: 40%
    left: 0
    opacity: .4
    position: absolute
    transition: opacity .3s ease
    width: 100%
    z-index: 2
  &:hover::after
    opacity: 1

.post_content, .post_title, .post_footer, .post_thumbnail img
  width: 100%

  @media screen and (min-width: $break-l)
    padding: $content-padding-l * $ratio_padding

  @media screen and (min-width: $break-m) and (max-width: $break-l)
    padding: $content-padding-m * $ratio_padding

  @media screen and (min-width: $break-s) and (max-width: $break-m)
    padding: $content-padding-s * $ratio_padding

  @media screen  and (min-width: $break-xs) and (max-width: $break-s)
    padding: $content-padding-xs * $ratio_padding

  @media screen and (max-width: $break-xs)
    padding: $content-padding-xxs * $ratio_padding

.post_content, .post_title, .post_footer, 
  animation-duration: .4s
  animation-fill-mode: both
  animation-name: fade-in
  animation-timing-function: ease
  animation-delay: .2s

.post_content
  position: relative
  z-index: 4
  
  @media screen and (min-width: $break-l)
    padding-top: $content-padding-l / 2
    padding-bottom: $content-padding-l / 2

  @media screen and (min-width: $break-m) and (max-width: $break-l)
    padding-top: $content-padding-m / 2
    padding-bottom: $content-padding-m / 2

  @media screen and (min-width: $break-s) and (max-width: $break-m)
    padding-top: $content-padding-s / 2
    padding-bottom: $content-padding-s / 2

  @media screen  and (min-width: $break-xs) and (max-width: $break-s)
    padding-top: $content-padding-xs / 2
    padding-bottom: $content-padding-xs / 2

  @media screen and (max-width: $break-xs)
    padding-top: $content-padding-xxs / 2
    padding-bottom: $content-padding-xxs / 2
  
.post_title
  position: relative
  padding-bottom: 0
  z-index: 20
  &.thumbnail
    margin-top: -18em
    height: 18em
    display: flex
    align-items: flex-end
    color: white
    background-image: linear-gradient(to top, rgba(41, 50, 60, 0.4) 10%, rgba(41, 50, 60, 0))
  h1,h4
    // text shadow does not work well on safari with .card-gradient
    // text-shadow: 0 1px 15px rgba(41, 50, 60, .5)
    // -webkit-text-shadow: 0 1px 15px rgba(41, 50, 60, .5)
  h1
    margin-bottom: 0

.post_footer
  z-index: 10
  padding-top: 0

.post_thumbnail
  border-bottom: 1px solid rgba(0, 0, 0, 0.2)
  img
    height: auto
    vertical-align: middle

.tags-list
  font-size: $step-down-1
  margin: 0
  padding: 0

.tags-list-item
  -webkit-transition: all .3s ease
  transition: all .3s ease
  a
    -webkit-transition: all .3s ease
    transition: all .3s ease
    color: lighten($color, 20)
    text-decoration: none
    text-transform: uppercase
    &:hover
      color: $color
  -webkit-appearance: none
  float: left
  letter-spacing: 1px
  list-style: none
  padding: .7em .5em
  margin-left: 0
  padding-left: 0
  text-align: center
  position: relative
  z-index: 4
  &:hover
    color: $color

.button-wrapper
  z-index: -1
  margin-left: auto
  &:last-of-type
    padding-bottom: 0

.fade-in
  animation-duration: .4s
  animation-fill-mode: both
  animation-delay: .1s
  animation-name: fade-in-up
  animation-timing-function: ease
 
@keyframes fade-in-up 
  from 
    opacity: 0
    -webkit-transform: translate3d(0, 1%, 0)
    transform: translate3d(0, 1%, 0)
  to 
    opacity: 1
    -webkit-transform: none
    transform: none

@keyframes fade-in 
  from 
    opacity: 0
    -webkit-transform: translate3d(0, 0, 0)
    transform: translate3d(0, 0, 0)
  to 
    opacity: 1
    -webkit-transform: none
    transform: none
  
.button
  background-image: linear-gradient(-120deg, rgba(107, 79, 189, 1) 0%, #72378c 100%)
  background-position: 100% 0
  background-size: 200% auto
  border-radius: .5rem
  color: #fff
  display: inline-block
  font-size: $base-font-size
  font-weight: 400
  letter-spacing: 1px
  padding: .7em 1.4em
  margin-right: .5em
  margin-top: .5em
  position: relative
  text-align: center
  text-decoration: none
  text-transform: uppercase
  -webkit-transition: background .3s ease
  transition: background .3s ease
  z-index: 4
  &:hover
    background-position: 0 0
    color: #fff
  &.alt
    background: rgba(107, 79, 189, 0.2)
    color: rgba(107, 79, 189, 1)
  &.alt:hover
    background: rgba(107, 79, 189, .3)
  
  @media screen and (max-width: $break-m)
    padding: .5em 1em


.container
  display:flex
  flex-direction: column
  margin: auto
  justify-content: flex-start
  .item 
    display: flex
    flex-direction: row
    align-items: center
    i
      font-size: $step-up-2
      width: 2em

